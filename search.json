[{"title":"idea Maven install控制台乱码问题解决方案","url":"/2025/11/12/idea%20Maven%20install%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","content":"失败尝试：设置idea编码打开 idea, 点击 File/文件 -&gt; Settings/设置 找到 编辑器 - 文件编码，全部设置为 UTF-8这个是网上到处都是的常规设置，在我的环境里是没用的\n成果解决：Maven环境变量配置中文打开 idea, 点击 File/文件 -&gt; Settings/设置 -&gt; Build,Execution,Deployment/构建、执行、部署 -&gt; Build Tools/构建工具 -&gt; Maven -&gt; Runner/运行程序(也可以在操作系统的环境变量里设置)Name&#x3D;MAVEN_OPTSValue&#x3D;-Dsun.stdout.encoding=UTF-8 -Dstderr.encoding=UTF-8 -Dconsole.encoding=UTF-8 -Dfile.encoding=UTF-8\n","categories":["牛马工具箱","开发问题"],"tags":["idea","maven","代理"]},{"title":"极空间网使用阿里云服务器中转Clash，完美解决qbittorrent容器网络问题","url":"/2025/11/12/%E6%9E%81%E7%A9%BA%E9%97%B4%E7%BD%91%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E8%BD%ACClash%EF%BC%8C%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3qbittorrent%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98/","content":"\n零、写在前面：为什么有这篇笔记？\n一、我的“战斗”背景与架构（我踩过的坑）\n1.1 我踩过的坑（真的，一个不落）\n坑1：本地 Docker Clash 容器\n坑2：魔改版容器\n坑3：从头编译Linux环境\n\n\n1.2 我的“Aha!”时刻：外部专用代理架构\n1.3 优劣分析（一个过来人的忠告）\n\n\n二、阶段一：配置阿里云Clash代理服务器（我的“基站”）\n2.1 我的“军火库”准备\n2.1.1. 服务器 (国内中转是关键):\n2.1.2 Clash订阅（我的“弹药”）\n2.1.3 Clash for Windows 客户端：\n\n\n2.2 关键配置：让Clash“开门迎客”\n2.3 网络安全 (I): 配置阿里云安全组 (第一道门)\n2.4 网络安全 (II): 配置Windows Defender防火墙 (第二道门)\n2.5 服务器端自检 (我的备忘录)\n\n\n三、端口连通性故障排查\n3.1 常见问题及解决方案\n3.1.1 端口连通性问题\n3.1.2 Clash服务问题\n3.1.3 极空间NAS连接问题\n3.1.4 认证与安全问题\n3.1.5 配置同步问题\n3.1.6 快速诊断命令\n\n\n3.2 Windows特定排查步骤\n\n\n四、阶段二：配置极空间NAS客户端（装上“信号接收器”）\n4.1 极空间使用Docker compose安装qBittorrent\n4.2 我的 Docker Compose 配置 (已排坑)\n4.3 qBittorrent代理配置\n\n\n五、阶段三：验证与我的“急救箱”（排错备忘）\n5.1 有效性验证\n5.2 故障修复\n\n\n六、总结\n\n零、写在前面：为什么有这篇笔记？如果你搜到这篇笔记，那你八成和我一样，被极空间的 Docker 网络搞得焦头烂额我，一个热爱折腾的程序员，在买了极空间之后，就走上了一条不归路。别的都好，唯独 Docker 里的网络环境，简直是“天坑”。qBittorrent 连不上 Tracker，各种“xx面板”连不上 Github，我受够了！在尝试了 N 种（包括但不限于）在 Docker 里装 Clash 容器 、魔改 network_mode 、甚至从头编译……全都失败或极其不稳定后，我终于找到了一个近乎完美的解决方案核心思路： 不在 NAS 本地死磕，换个地方降维打击！把代理服务剥离出去，放到一台专用的、网络稳定的云服务器上这篇笔记，就是我从头到尾的配置记录和排错心法。它写给我自己，防止我以后忘了；也写给你，希望能帮你节省那宝贵的（可能已经浪费掉的）几十个小时\n一、我的“战斗”背景与架构（我踩过的坑）1.1 我踩过的坑（真的，一个不落）坑1：本地 Docker Clash 容器我试了： dreamacro/clash, haishanh/yacd, ShellCrash…结果： 全都失败！极空间的 Docker 网络太诡异了 。 bridge 模式  默认出不去， host 模式  又会和 NAS 本地服务抢端口，而且路由配置复杂到爆炸\n坑2：魔改版容器我试了： 各种大神打包好、声称“一键启动”的all-in-one包结果： 在我电脑上跑得好好的，一装到极空间就歇菜\n坑3：从头编译Linux环境我试了： 试图在 Docker 里跑个 Alpine/Ubuntu，手动编译安装 Clash结果： 容器里连 apt update 都跑不通，网络源都访问不到，还谈什么编译？\n1.2 我的“Aha!”时刻：外部专用代理架构在我即将砸键盘的时候，我冷静下来：我为什么非要在极空间这个“黑盒”里折腾网络？我只是需要一个稳定的代理入口，让 qB 这种“残废”应用能连上网而已于是，这个架构诞生了：代理服务器 (Server): 一台阿里云 Windows 服务器。它只干一件事：跑 Clash，提供一个高可用的代理服务出口客户端 (Client): 极空间 NAS 里的 qBittorrent。它也只干一件事：当个“傻瓜”，通过上面那个服务器的 IP:端口 连出去 \n1.3 优劣分析（一个过来人的忠告）\n\n\n优点（为啥我这样操作）\n缺点（月亮的另一面）\n\n\n\n1. 稳如老狗，彻底解耦\n1. 花钱：云服务器是要租金的\n\n\n2. 绕开天坑：再也不用管极空间 Docker 那该死的网络了\n2. 多一跳延迟：NAS -&gt; 阿里云 -&gt; 目标，但信我，值得\n\n\n3. 新手友好：我选 Windows Server，全程点鼠标，不敲Linux命令\n3. 初始配置：每个 Docker 容器都得手动填一次代理\n\n\n4. 一劳永逸：这个代理服务，我全家的PC、手机都能用\n-\n\n\n二、阶段一：配置阿里云Clash代理服务器（我的“基站”）这是我整套方案的基石。我必须保证这个“基站” 7x24 小时稳定在线\n2.1 我的“军火库”准备2.1.1. 服务器 (国内中转是关键):我为什么选阿里云&#x2F;腾讯云？ 这就是精髓！我需要的是“国内中转”。我从家里的 NAS 连到阿里云的国内节点，延迟常年 &lt;100ms ，稳得一塌糊涂。流量先高速“落地”到云服务器，再通过云服务器的优质带宽出去。这比我家宽带直连国外强太多了购买国内服务器，我使用阿里云服务器来中转，国内主流云服务商理论上都有一样的效果，如果现在没有服务器，恰好我的文章帮到了你，可以通过我的推广链接优惠购买服务器阿里云低至99元&#x2F;年起（额外9折优惠）腾讯云低至99元&#x2F;年起\n2.1.2 Clash订阅（我的“弹药”）这个不用多说，你得有自己的订阅 URL获取Clash订阅信息，以下是几个自用的机场推荐 (同上，恰饭链接):赔钱机场，量大实惠，强烈推荐龙猫云，服务稳定，备用神器一元机场，一块钱一个月，只要能用就不亏\n2.1.3 Clash for Windows 客户端：步骤：\n1. 远程连接到阿里云Windows服务器2. 从Github下载Clash Windows版本3. 安装到服务器4. 从订阅地址获取配置文件5. 配置Clash为启用系统代理，规则模式\n\n2.2 关键配置：让Clash“开门迎客”默认的 Clash 只准自己连自己 (127.0.0.1) 。我必须修改配置文件，让它监听所有IP，这样我家的 NAS 才能从公网连进来\n\n在 Clash GUI 界面，点 Profiles/配置\n对着激活的那个配置文件点右键，选 Edit (编辑)tips: 在Windows中可以直接使用客户端操作，其他版本中直接编辑并保存配置文件也可以有同样的效果，选用一个习惯的方式就可以\n参照以下内容修改配置，没有的属性直接新增就可以，核心配置如下，改完直接保存：\n\n# 基础代理设置（我家 NAS 就要连这个端口）mixed-port: 7897# 关键：允许外部访问，监听地址必须改为0.0.0.0allow-lan: truebind-address: &quot;0.0.0.0&quot;external-controller: 0.0.0.0:9090# 认证设置（如果不设密码，几小时内就会被黑客扫到，然后被刷爆流量，当场BOOM SHAKALAKA!!）authentication:  - &quot;admin:YourStrongPassword123!&quot;# 你的代理节点配置（以下内容按需配置，一般可以用订阅文件中自带的）proxies:  - name: &quot;your-proxy&quot;    type: ss    server: your-server    port: 443    cipher: aes-256-gcm    password: &quot;your-password&quot;\n\n重要： 回到 Clash GUI，在 General (常规) 页面，重新加载 (Reload) 一下配置（或者干脆重启Clash），好让修改生效\n重要： 一定要关闭Clash的自动更新订阅，不然很快又要重新设置\n\n2.3 网络安全 (I): 配置阿里云安全组 (第一道门)我称之为‘两道门’。数据包得先过‘小区大门’（阿里云安全组），再过‘我家房门’（Windows 防火墙）。我必须两把钥匙都有第一道门 (小区大门)：阿里云安全组它决定了，谁的IP能‘摸’到我的服务器\n\n登录阿里云 ECS 控制台\n网络与安全 -&gt; 安全组 -&gt; 配置规则\n入方向 -&gt; 手动添加\n\n我的配置 (最安全的配置):\n\n授权策略: 允许\n协议类型: TCP\n端口范围: 7897/7897 (就是我 mixed-port 设的那个。如果我也要远程访问控制面板，就再加个 9090/9090)\n授权对象: /32 (例如 123.45.67.89/32)。这是最安全的，我只允许我家里的公网 IP 访问\n\n临时测试用 (不安全，用完就删):\n\n授权对象: 0.0.0.0/0 (意思是‘裸奔’，谁都能连)\n\n2.4 网络安全 (II): 配置Windows Defender防火墙 (第二道门)阿里云把人放进‘小区’了，Windows 默认也不让陌生人‘进屋’\n\n在我的云服务器上，“开始”菜单搜 高级安全 Windows Defender 防火墙\n左边点 入站规则\n右边点 新建规则...\n\n我选的方案 (按程序，最省心):\n\n规则类型: 程序\n下一步: 此程序路径，点 浏览... 找到 clash-windows.exe\n下一步: 允许连接\n下一步: 域、私有、公用 三个全都勾上\n下一步: 随便起个名 (比如 Clash Inbound Allow)，搞定\n\n2.5 服务器端自检 (我的备忘录)配置完，我得确认服务真的按我说的在跑\n\n查服务在不在听:在服务器的 PowerShell 或 CMD 里敲：\nnetstat -ano | findstr &quot;7897&quot;\n\n我想要的 (正确): TCP    0.0.0.0:7897          0.0.0.0:0              LISTENING \n出错了 (失败): TCP    127.0.0.1:7897… (说明 bind-address 没改对) \n出错了 (失败): 啥也没有。(说明 Clash 没启动)\n\n\n查本地通不通:在 PowerShell 里敲：\nTest-NetConnection -ComputerName 127.0.0.1 -Port 7897\n\n我想要的 (正确): TcpTestSucceeded : True\n出错了 (失败): TcpTestSucceeded : False。(说明 Clash 崩了)\n\n\n\n\n三、端口连通性故障排查3.1 常见问题及解决方案3.1.1 端口连通性问题\n\n\n问题现象\n错误提示\n可能原因\n解决方案\n\n\n\n连接超时\nConnection timed out\n1. 安全组未配置2. 服务器防火墙阻挡3. 网络路由问题\n1. 检查阿里云安全组规则2. 关闭Windows防火墙或添加例外3. 使用tracert诊断网络路径\n\n\n连接被拒绝\nConnection refused\n1. 服务未运行2. 监听地址错误3. 端口被占用\n1. 确认Clash服务已启动2. 检查bind-address设置为0.0.0.03. 使用netstat -ano查找占用进程\n\n\n认证失败\n407 Proxy Authentication Required\n1. 用户名密码错误2. 认证配置格式错误3. 客户端未发送认证\n1. 核对config.yaml中的authentication配置2. 确认客户端正确填写认证信息3. 检查认证信息特殊字符转义\n\n\n3.1.2 Clash服务问题\n\n\n问题现象\n可能原因\n解决方案\n\n\n\nClash启动失败\n1. 配置文件语法错误2. 端口被占用3. 权限不足\n1. 使用clash -t -f config.yaml测试配置2. 更换端口或结束占用进程3. 以管理员权限运行\n\n\n服务运行但无流量\n1. 代理规则配置错误2. 节点不可用3. DNS解析失败\n1. 检查代理规则和节点配置2. 测试节点连通性3. 配置有效的DNS服务器\n\n\n内存&#x2F;CPU占用过高\n1. 连接数过多2. 日志级别过高3. 系统资源不足\n1. 调整连接限制2. 降低日志级别为warning或error3. 升级服务器配置\n\n\n3.1.3 极空间NAS连接问题\n\n\n问题现象\n可能原因\n解决方案\n\n\n\nDocker容器无法联网\n1. 代理环境变量错误2. 网络模式冲突3. 极空间DNS设置\n1. 检查HTTP_PROXY&#x2F;HTTPS_PROXY变量格式2. 尝试host网络模式测试3. 配置容器内DNS服务器为8.8.8.8\n\n\nqBittorrent无法连接Tracker\n1. 代理未生效2. 端口未正确配置3. 防火墙阻挡\n1. 验证代理设置中的”对Peer连接使用代理”选项2. 检查端口映射配置3. 在路由器中配置端口转发\n\n\n下载速度慢\n1. 代理服务器带宽限制2. 连接数限制3. 磁盘I&#x2F;O瓶颈\n1. 测试代理服务器带宽2. 调整qBittorrent连接数设置3. 检查极空间存储性能\n\n\n3.1.4 认证与安全问题\n\n\n问题现象\n可能原因\n解决方案\n\n\n\n频繁断连\n1. 认证会话超时2. 网络不稳定3. 服务器负载过高\n1. 调整代理超时设置2. 检查网络稳定性3. 监控服务器资源使用\n\n\n未授权访问\n1. 认证配置缺失2. 安全组过于开放3. 弱密码\n1. 配置authentication参数2. 限制安全组源IP范围3. 使用强密码并定期更换\n\n\n3.1.5 配置同步问题\n\n\n问题现象\n可能原因\n解决方案\n\n\n\n配置修改不生效\n1. 配置文件未重载2. 缓存问题3. 多配置文件冲突\n1. 重启Clash服务应用配置2. 清除浏览器和系统代理缓存3. 检查默认配置文件路径\n\n\n3.1.6 快速诊断命令# Windows服务器诊断netstat -ano | findstr &quot;7890&quot;              # 检查端口监听telnet 127.0.0.1 7890                      # 测试本地连接netsh advfirewall show allprofiles state   # 检查防火墙状态# 极空间NAS诊断docker logs qbittorrent                    # 查看容器日志docker exec -it qbittorrent ping 8.8.8.8   # 测试容器网络curl --proxy http://代理IP:端口 https://ipinfo.io/json  # 测试代理\n\n3.2 Windows特定排查步骤# 1. 检查防火墙状态Get-NetFirewallProfile | Select-Object Name, Enabled# 2. 检查端口监听netstat -ano | findstr &quot;7890&quot;# 3. 测试本地连接Test-NetConnection -ComputerName 127.0.0.1 -Port 7890# 4. 测试外部连接（从其他机器）telnet 你的服务器IP 7890\n\n四、阶段二：配置极空间NAS客户端（装上“信号接收器”）“基站”搭好了。现在我回老家（极空间），给 qBittorrent 装上‘信号接收器’\n4.1 极空间使用Docker compose安装qBittorrent\n建文件夹: 我在极空间的文件管理里，建了两个目录：\n/qbit/config (存配置)\n/qbit/downloads (存下载)\n\n\n上 Docker Compose:\n打开极空间的 Docker 应用\n选 Compose (高级) 模式，点 新建\n把下面的代码贴进去\n\n\n\n4.2 我的 Docker Compose 配置 (已排坑)在极空间的Docker中新建一个Compose项目，名称随意，使用以下配置冒号前的端口按需调整，冒号后的端口建议和我用同一个在文件系统创建好路径以后，使用查询路径功能找到对应文件夹，复制路径粘贴到下面的配置文件里就可以点击创建，等待容器创建完成\n\nDocker Compose 的大坑：network_mode: host 和 ports 的恩怨\n我在这里卡了很久！网上很多教程是错的根据 Docker 官方文档，当你用了 network_mode: host（这是为了绕开极空间 bridge 模式  的天坑，我们必须用 host），ports 那一整段就会被 Docker 完全忽略 ！\n容器的端口会直接暴露在 NAS 的 IP 上。你唯一需要关心的是 WEBUI_PORT 这个环境变量 \n\n这是我的最终可用配置，ports只用来备注和提醒 (docker-compose.yml)：\nservices:  qbit:    image: linuxserver/qbittorrent:latest  # 使用latest标签获取最新版本    container_name: qbit    environment:      - PUID=0  # 极空间推荐使用0      - PGID=0  # 极空间推荐使用0      - TZ=Asia/Shanghai      - WEBUI_PORT=18080  # 网页管理界面端口    network_mode: host    volumes:      - /qbit/config:/config  # 替换为极空间上你准备的配置目录实际路径      - /qbit/downloads:/downloads  # 替换为极空间上你准备的下载目录实际路径[citation:9]    ports:      - &quot;18080:8080&quot;  # 网页管理界面端口映射      - &quot;16881:6881&quot;   # TCP下载端口映射      - &quot;16881:6881/udp&quot; # UDP下载端口映射    restart: unless-stopped\n\n4.3 qBittorrent代理配置本文以中文版操作为例，依次进行以下配置即可点击工具 - 选项，打开连接选项卡监听端口 - 用于传入连接的端口设为qbit容器启动选项中配置的端口代理服务器的类型选择HTTP，主机输入国内服务器的IP，端口使用上一步中配置的mixed-port后面的选项就按需勾选，主要是看PT站的需求：通过代理查找主机名、对BitTorrent目的使用代理、使用代理服务器进行用户连接、对RSS目的使用代理、对常规目的使用代理\n\n访问 WebUI: 直接使用极空间docker自带的远程访问工具，可以不用考虑网络问题\n登录: 默认 admin / adminadmin\n打开设置: 顶部菜单 工具 (Tools) -&gt; 选项 (Options) (或 Alt+O) \n配置连接:\n\n\n点 连接 (Connection) 标签页 \n找到 代理服务器 (Proxy Server) 区域，我就是这么填的：\n类型 (Type): HTTP\n主机 (Host): 我的阿里云服务器公网IP\n端口 (Port): 7897 (就是我 Clash mixed-port 设的那个)\n用户名 (Username): admin (我 authentication 里设的)\n密码 (Password): YourStrongPassword123! (我设的密码)\n下面这几项我全打勾了 (很重要):\n 通过代理查找主机名\n 对BitTorrent目的使用代理\n 使用代理服务器进行用户连接  (必须勾！不然连 Peer 还是用你的真实 IP，等于裸奔！)   \n 对RSS目的使用代理\n\n\n\n\n加强隐私 (我的偏执):  切换到 BitTorrent 标签页  在 隐私 (Privacy) 区域，我把 启用 DHT、启用 Peer Exchange (PEX)、启用本地 Peer 发现 (LPD) 全都去掉勾  我不希望任何意外的连接暴露我的真实 IP\n点击 应用 (Apply) 并 确定 (OK) 保存\n\n五、阶段三：验证与我的“急救箱”（排错备忘）配置完，我随便找了个热门种子测试，看到 Tracker 状态是 Working，速度“咻”地起来了，大功告成！但万一未来（或你）失败了，这里是我的排错笔记，我称之为“急救箱”，直接参考第三部分就可以\n5.1 有效性验证我用了最简单粗暴的方式：下载一个需要代理的种子，可以正常运行就说明一切顺利如果不能正常下载，但是上面有本地电脑测试中转代理服务器又是正常的，那就是qbit的代理配置没设置好，重新调整尝试一轮一般就可以\n5.2 故障修复如遇重大问题，按以下步骤恢复：停止所有服务：Clash + qBittorrent检查网络连通性：从极空间ping阿里云服务器验证基础配置：IP、端口、认证信息分步启动服务：先启动Clash验证，再启动qBittorrent查看日志定位问题：Clash日志 + qBittorrent日志\n六、总结通过这套“C&#x2F;S分离”架构，我总算是驯服了极空间的 Docker 网络。qB 现在跑得飞快，Trakcer 全红，下载和搜刮都丝般顺滑这篇笔记，既是我的“胜利战报”，也是我给自己的“未来保险”\n！！！最终安全备忘！！！Clash 认证 (authentication) 必须开！  永远别在公网裸奔一个没密码的代理！  阿里云安全组 (Security Group) 必须锁死！  测试通过后，立刻把授权对象从 0.0.0.0/0 (任何 IP) 改成你家宽带的固定公网 IP！ （如果没固定IP，那就勤快点，IP变了就去改一次，或者设置一个可信的IP段）\n","categories":["技术笔记"],"tags":["代理","极空间","Clash","qbittorrent"]},{"title":"Linux配置MySQL日志审计转发","url":"/2025/11/19/%E9%85%8D%E7%BD%AEMySQL%E6%97%A5%E5%BF%97%E5%AE%A1%E8%AE%A1%E8%BD%AC%E5%8F%91/","content":"Linux服务器配置MySQL日志审计\n编辑配置文件\n\nvi /etc/rsyslog.conf\n\n\n添加转发规则： 在文件末尾添加以下行（二选一）：\n\n使用 UDP 协议 (最常见)：*.* @192.168.79.20:514使用 TCP 协议 (如果服务器支持)：*.* @@192.168.79.20:514\n\n注意：*.* 表示发送所有设施（facility）和所有级别（severity）的日志。如果只想发送特定类型的日志，可以修改为 authpriv.* 或 info.* 等\n\n重启服务\n\nsystemctl restart rsyslog\n\n\n测试验证\n\nlogger &quot;Test Log to 192.168.79.20&quot;\n","categories":["牛马工具箱","运维"],"tags":["MySQL","日志审计","运维"]}]